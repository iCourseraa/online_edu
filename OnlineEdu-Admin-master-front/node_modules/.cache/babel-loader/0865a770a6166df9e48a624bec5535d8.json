{"remainingRequest":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\src\\store\\modules\\permission.js","dependencies":[{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\src\\store\\modules\\permission.js","mtime":1734500743014},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\babel.config.js","mtime":1734500708555},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3Iuc29tZS5qcyI7Ci8vIHN0b3JlL3Blcm1pc3Npb24uanMKaW1wb3J0IHsgYXN5bmNSb3V0ZXMsIGNvbnN0YW50Um91dGVzIH0gZnJvbSAnQC9yb3V0ZXIvaW5kZXgnOwpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHJvbGVzLCByb3V0ZSkgewogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucm9sZXMpIHsKICAgIHJldHVybiByb2xlcy5zb21lKGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgIHJldHVybiByb3V0ZS5tZXRhLnJvbGVzLmluZGV4T2Yocm9sZSkgPj0gMDsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KdmFyIHBlcm1pc3Npb24gPSB7CiAgc3RhdGU6IHsKICAgIHJvdXRlcnM6IGNvbnN0YW50Um91dGVzLAogICAgYWRkUm91dGVyczogW10KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1JPVVRFUlM6IGZ1bmN0aW9uIFNFVF9ST1VURVJTKHN0YXRlLCByb3V0ZXJzKSB7CiAgICAgIHN0YXRlLmFkZFJvdXRlcnMgPSByb3V0ZXJzOwogICAgICBzdGF0ZS5yb3V0ZXJzID0gY29uc3RhbnRSb3V0ZXMuY29uY2F0KHJvdXRlcnMpOwogICAgfSwKICAgIFJFU0VUX1JPVVRFUlM6IGZ1bmN0aW9uIFJFU0VUX1JPVVRFUlMoc3RhdGUpIHsKICAgICAgc3RhdGUuYWRkUm91dGVycyA9IFtdOwogICAgICBzdGF0ZS5yb3V0ZXJzID0gY29uc3RhbnRSb3V0ZXM7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBHZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gR2VuZXJhdGVSb3V0ZXMoX3JlZiwgZGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciByb2xlcyA9IGRhdGEucm9sZXM7CiAgICAgICAgdmFyIGFjY2Vzc2VkUm91dGVycyA9IGFzeW5jUm91dGVzLmZpbHRlcihmdW5jdGlvbiAodikgewogICAgICAgICAgaWYgKHJvbGVzLmluZGV4T2YoJzEnKSA+PSAwKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIGlmIChoYXNQZXJtaXNzaW9uKHJvbGVzLCB2KSkgewogICAgICAgICAgICBpZiAodi5jaGlsZHJlbiAmJiB2LmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB2LmNoaWxkcmVuID0gdi5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgICBpZiAoaGFzUGVybWlzc2lvbihyb2xlcywgY2hpbGQpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gdjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gdjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIGNvbW1pdCgnU0VUX1JPVVRFUlMnLCBhY2Nlc3NlZFJvdXRlcnMpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRSb3V0ZXJzOiBmdW5jdGlvbiByZXNldFJvdXRlcnMoX3JlZjIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnUkVTRVRfUk9VVEVSUycpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwoKLy8gZXhwb3J0IGRlZmF1bHQgewovLyAgIG5hbWVzcGFjZTogdHJ1ZSwKLy8gICAuLi5wZXJtaXNzaW9uCi8vIH0KCmV4cG9ydCBkZWZhdWx0IHBlcm1pc3Npb247"},{"version":3,"names":["asyncRoutes","constantRoutes","hasPermission","roles","route","meta","some","role","indexOf","permission","state","routers","addRouters","mutations","SET_ROUTERS","concat","RESET_ROUTERS","actions","GenerateRoutes","_ref","data","commit","Promise","resolve","accessedRouters","filter","v","children","length","child","resetRouters","_ref2","reject"],"sources":["C:/Users/86193/Desktop/online_edu_V1224/OnlineEdu-Admin-master-front/src/store/modules/permission.js"],"sourcesContent":["// store/permission.js\r\nimport { asyncRoutes, constantRoutes } from '@/router/index'\r\n\r\nfunction hasPermission(roles, route) {\r\n  if (route.meta && route.meta.roles) {\r\n    return roles.some(role => route.meta.roles.indexOf(role) >= 0)\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\nconst permission = {\r\n  state: {\r\n    routers: constantRoutes,\r\n    addRouters: []\r\n  },\r\n  mutations: {\r\n    SET_ROUTERS: (state, routers) => {\r\n      state.addRouters = routers\r\n      state.routers = constantRoutes.concat(routers)\r\n    },\r\n    RESET_ROUTERS: (state) => {\r\n      state.addRouters = []\r\n      state.routers = constantRoutes\r\n    }\r\n  },\r\n  actions: {\r\n    GenerateRoutes({ commit }, data) {\r\n      return new Promise(resolve => {\r\n        const { roles } = data\r\n        const accessedRouters = asyncRoutes.filter(v => {\r\n          if (roles.indexOf('1') >= 0) return true\r\n          if (hasPermission(roles, v)) {\r\n            if (v.children && v.children.length > 0) {\r\n              v.children = v.children.filter(child => {\r\n                if (hasPermission(roles, child)) {\r\n                  return child\r\n                }\r\n                return false\r\n              })\r\n              return v\r\n            } else {\r\n              return v\r\n            }\r\n          }\r\n          return false\r\n        })\r\n        commit('SET_ROUTERS', accessedRouters)\r\n        resolve()\r\n      })\r\n    },\r\n    resetRouters({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        commit('RESET_ROUTERS')\r\n        resolve()\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// export default {\r\n//   namespace: true,\r\n//   ...permission\r\n// }\r\n\r\nexport default permission\r\n\r\n"],"mappings":";;;;;;AAAA;AACA,SAASA,WAAW,EAAEC,cAAc,QAAQ,gBAAgB;AAE5D,SAASC,aAAaA,CAACC,KAAK,EAAEC,KAAK,EAAE;EACnC,IAAIA,KAAK,CAACC,IAAI,IAAID,KAAK,CAACC,IAAI,CAACF,KAAK,EAAE;IAClC,OAAOA,KAAK,CAACG,IAAI,CAAC,UAAAC,IAAI;MAAA,OAAIH,KAAK,CAACC,IAAI,CAACF,KAAK,CAACK,OAAO,CAACD,IAAI,CAAC,IAAI,CAAC;IAAA,EAAC;EAChE,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF;AAEA,IAAME,UAAU,GAAG;EACjBC,KAAK,EAAE;IACLC,OAAO,EAAEV,cAAc;IACvBW,UAAU,EAAE;EACd,CAAC;EACDC,SAAS,EAAE;IACTC,WAAW,EAAE,SAAbA,WAAWA,CAAGJ,KAAK,EAAEC,OAAO,EAAK;MAC/BD,KAAK,CAACE,UAAU,GAAGD,OAAO;MAC1BD,KAAK,CAACC,OAAO,GAAGV,cAAc,CAACc,MAAM,CAACJ,OAAO,CAAC;IAChD,CAAC;IACDK,aAAa,EAAE,SAAfA,aAAaA,CAAGN,KAAK,EAAK;MACxBA,KAAK,CAACE,UAAU,GAAG,EAAE;MACrBF,KAAK,CAACC,OAAO,GAAGV,cAAc;IAChC;EACF,CAAC;EACDgB,OAAO,EAAE;IACPC,cAAc,WAAdA,cAAcA,CAAAC,IAAA,EAAaC,IAAI,EAAE;MAAA,IAAhBC,MAAM,GAAAF,IAAA,CAANE,MAAM;MACrB,OAAO,IAAIC,OAAO,CAAC,UAAAC,OAAO,EAAI;QAC5B,IAAQpB,KAAK,GAAKiB,IAAI,CAAdjB,KAAK;QACb,IAAMqB,eAAe,GAAGxB,WAAW,CAACyB,MAAM,CAAC,UAAAC,CAAC,EAAI;UAC9C,IAAIvB,KAAK,CAACK,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,IAAI;UACxC,IAAIN,aAAa,CAACC,KAAK,EAAEuB,CAAC,CAAC,EAAE;YAC3B,IAAIA,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;cACvCF,CAAC,CAACC,QAAQ,GAAGD,CAAC,CAACC,QAAQ,CAACF,MAAM,CAAC,UAAAI,KAAK,EAAI;gBACtC,IAAI3B,aAAa,CAACC,KAAK,EAAE0B,KAAK,CAAC,EAAE;kBAC/B,OAAOA,KAAK;gBACd;gBACA,OAAO,KAAK;cACd,CAAC,CAAC;cACF,OAAOH,CAAC;YACV,CAAC,MAAM;cACL,OAAOA,CAAC;YACV;UACF;UACA,OAAO,KAAK;QACd,CAAC,CAAC;QACFL,MAAM,CAAC,aAAa,EAAEG,eAAe,CAAC;QACtCD,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ,CAAC;IACDO,YAAY,WAAZA,YAAYA,CAAAC,KAAA,EAAoB;MAAA,IAAjBV,MAAM,GAAAU,KAAA,CAANV,MAAM;QAAEX,KAAK,GAAAqB,KAAA,CAALrB,KAAK;MAC1B,OAAO,IAAIY,OAAO,CAAC,UAACC,OAAO,EAAES,MAAM,EAAK;QACtCX,MAAM,CAAC,eAAe,CAAC;QACvBE,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ;EACF;AACF,CAAC;;AAED;AACA;AACA;AACA;;AAEA,eAAed,UAAU","ignoreList":[]}]}