{"remainingRequest":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\src\\permission.js","dependencies":[{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\src\\permission.js","mtime":1734500743007},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\babel.config.js","mtime":1734500708555},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\86193\\Desktop\\online_edu_V1224\\OnlineEdu-Admin-master-front\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy84NjE5My9EZXNrdG9wL29ubGluZV9lZHVfVjEyMjQvT25saW5lRWR1LUFkbWluLW1hc3Rlci1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJDOi9Vc2Vycy84NjE5My9EZXNrdG9wL29ubGluZV9lZHVfVjEyMjQvT25saW5lRWR1LUFkbWluLW1hc3Rlci1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvODYxOTMvRGVza3RvcC9vbmxpbmVfZWR1X1YxMjI0L09ubGluZUVkdS1BZG1pbi1tYXN0ZXItZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvODYxOTMvRGVza3RvcC9vbmxpbmVfZWR1X1YxMjI0L09ubGluZUVkdS1BZG1pbi1tYXN0ZXItZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsgLy8gcHJvZ3Jlc3MgYmFyCmltcG9ydCAnbnByb2dyZXNzL25wcm9ncmVzcy5jc3MnOyAvLyBwcm9ncmVzcyBiYXIgc3R5bGUKaW1wb3J0IGdldFBhZ2VUaXRsZSBmcm9tICdAL3V0aWxzL2dldC1wYWdlLXRpdGxlJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwpOUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBzaG93U3Bpbm5lcjogZmFsc2UKfSk7IC8vIE5Qcm9ncmVzcyBDb25maWd1cmF0aW9uCgp2YXIgd2hpdGVMaXN0ID0gWycvbG9naW4nXTsgLy8gbm8gcmVkaXJlY3Qgd2hpdGVsaXN0Cgpyb3V0ZXIuYmVmb3JlRWFjaCgvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBpc0xvZ2luOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgLy8gc3RhcnQgcHJvZ3Jlc3MgYmFyCiAgICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTsKICAgICAgICAgIC8vIHNldCBwYWdlIHRpdGxlCiAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZSh0by5tZXRhLnRpdGxlKTsKCiAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGUgdXNlciBoYXMgbG9nZ2VkIGluCiAgICAgICAgICBpc0xvZ2luID0gT2JqZWN0LmtleXMoc3RvcmUuZ2V0dGVycy51c2VyKS5sZW5ndGggIT09IDA7CiAgICAgICAgICBpZiAoIWlzTG9naW4pIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRvLnBhdGggPT09ICcvbG9naW4nKSB7CiAgICAgICAgICAgIC8vIGlmIGlzIGxvZ2dlZCBpbiwgcmVkaXJlY3QgdG8gdGhlIGhvbWUgcGFnZQogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDnlJ/miJDlj6/orr/pl67nmoTot6/nlLHooagKICAgICAgICAgICAgaWYgKHN0b3JlLmdldHRlcnMuYWRkUm91dGVycy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICBnZW5lcmF0ZVJvdXRlcygpOwogICAgICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA3OgogICAgICAgICAgaWYgKCEod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgLy8gaW4gdGhlIGZyZWUgbG9naW4gd2hpdGVsaXN0LCBnbyBkaXJlY3RseQogICAgICAgICAgbmV4dCgpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxMToKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRJbmZvJyk7CiAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIC8vIOeUn+aIkOWPr+iuv+mXrueahOi3r+eUseihqAogICAgICAgICAgaWYgKHN0b3JlLmdldHRlcnMuYWRkUm91dGVycy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgZ2VuZXJhdGVSb3V0ZXMoKTsKICAgICAgICAgICAgbmV4dChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvKSwge30sIHsKICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMTc6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTc7CiAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDExKTsKICAgICAgICAgIE1lc3NhZ2UuZXJyb3IoX2NvbnRleHQudDAgfHwgJ0hhcyBFcnJvcicpOwogICAgICAgICAgbmV4dCgiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KHRvLnBhdGgpKTsKICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgY2FzZSAyMjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxMSwgMTddXSk7CiAgfSkpOwogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKCkgewogIC8vIGZpbmlzaCBwcm9ncmVzcyBiYXIKICBOUHJvZ3Jlc3MuZG9uZSgpOwp9KTsKZnVuY3Rpb24gZ2VuZXJhdGVSb3V0ZXMoKSB7CiAgdmFyIHJvbGVzID0gW3N0b3JlLmdldHRlcnMudXNlci5yb2xlSWRdOwogIHN0b3JlLmRpc3BhdGNoKCdHZW5lcmF0ZVJvdXRlcycsIHsKICAgIHJvbGVzOiByb2xlcwogIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgLy8g5Yqo5oCB5re75Yqg5Y+v6K6/6Zeu6Lev55Sx6KGoCiAgICByb3V0ZXIub3B0aW9ucy5yb3V0ZXMgPSBzdG9yZS5nZXR0ZXJzLnJvdXRlcnM7CiAgICByb3V0ZXIuYWRkUm91dGVzKF90b0NvbnN1bWFibGVBcnJheShzdG9yZS5nZXR0ZXJzLmFkZFJvdXRlcnMpKTsKICB9KTsKICAvLyBoYWNr5pa55rOVIOehruS/nWFkZFJvdXRlc+W3suWujOaIkCAsc2V0IHRoZSByZXBsYWNlOiB0cnVlIHNvIHRoZSBuYXZpZ2F0aW9uIHdpbGwgbm90IGxlYXZlIGEgaGlzdG9yeSByZWNvcmQKICAvLyBuZXh0KHsgLi4udG8sIHJlcGxhY2U6IHRydWUgfSkKfQ=="},{"version":3,"names":["router","store","NProgress","getPageTitle","Message","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","from","next","isLogin","wrap","_callee$","_context","prev","start","document","title","meta","Object","keys","getters","user","length","path","done","addRouters","generateRoutes","_objectSpread","replace","indexOf","dispatch","t0","error","concat","stop","_x","_x2","_x3","apply","arguments","afterEach","roles","roleId","then","options","routes","routers","addRoutes","_toConsumableArray"],"sources":["C:/Users/86193/Desktop/online_edu_V1224/OnlineEdu-Admin-master-front/src/permission.js"],"sourcesContent":["import router from '@/router'\r\nimport store from '@/store'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport getPageTitle from '@/utils/get-page-title'\r\nimport { Message } from 'element-ui'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\n\r\nconst whiteList = ['/login'] // no redirect whitelist\r\n\r\nrouter.beforeEach(async(to, from, next) => {\r\n  // start progress bar\r\n  NProgress.start()\r\n  // set page title\r\n  document.title = getPageTitle(to.meta.title)\r\n\r\n  // determine whether the user has logged in\r\n  const isLogin = Object.keys(store.getters.user).length !== 0\r\n  if (isLogin) {\r\n    if (to.path === '/login') {\r\n      // if is logged in, redirect to the home page\r\n      next({ path: '/' })\r\n      NProgress.done()\r\n    } else {\r\n      // 生成可访问的路由表\r\n      if (store.getters.addRouters.length === 0) {\r\n        generateRoutes()\r\n        next({ ...to, replace: true })\r\n      } else {\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    if (whiteList.indexOf(to.path) !== -1) {\r\n      // in the free login whitelist, go directly\r\n      next()\r\n    } else {\r\n      // other pages that do not have permission to access are redirected to the login page.\r\n      try {\r\n        // logged in, get user info\r\n        await store.dispatch('user/getInfo')\r\n        // 生成可访问的路由表\r\n        if (store.getters.addRouters.length === 0) {\r\n          generateRoutes()\r\n          next({ ...to, replace: true })\r\n        } else {\r\n          next()\r\n        }\r\n      } catch (error) {\r\n        Message.error(error || 'Has Error')\r\n        next(`/login?redirect=${to.path}`)\r\n        NProgress.done()\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  // finish progress bar\r\n  NProgress.done()\r\n})\r\n\r\nfunction generateRoutes() {\r\n  const roles = [store.getters.user.roleId]\r\n  store.dispatch('GenerateRoutes', { roles }).then(() => {\r\n    // 动态添加可访问路由表\r\n    router.options.routes = store.getters.routers\r\n    router.addRoutes([...store.getters.addRouters])\r\n  })\r\n  // hack方法 确保addRoutes已完成 ,set the replace: true so the navigation will not leave a history record\r\n  // next({ ...to, replace: true })\r\n}\r\n"],"mappings":"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","ignoreList":[]}]}